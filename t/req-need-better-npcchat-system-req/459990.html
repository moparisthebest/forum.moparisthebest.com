<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/req-need-better-npcchat-system-req/459990 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 19:32:56 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[REQ] Need better NpcChat system :(! [REQ] - Runescape - moparisthebest.com</title>
    <meta name="description" content="As I am a beginner and still learning Java, can someone provide me with an improved NPC Chat system, similar to that of xent&amp;#39;s  

BSH file system, but coded solely in java. I want to be able to write files to make npc&amp;#39;s &amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="459990.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[REQ] Need better NpcChat system :(! [REQ]&#39;" href="459990.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/req-need-better-npcchat-system-req/459990" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/req-need-better-npcchat-system-req/459990" />
<meta property="og:title" content="[REQ] Need better NpcChat system :(! [REQ]" />
<meta name="twitter:title" content="[REQ] Need better NpcChat system :(! [REQ]" />
<meta property="og:description" content="As I am a beginner and still learning Java, can someone provide me with an improved NPC Chat system, similar to that of xent‚Äôs  BSH file system, but coded solely in java. I want to be able to write files to make npc‚Äôs talk that is a bit more organized looking  and much less time consuming. Also, importantly with the elimination of throwing in a DelayedEventHandler which tends to  tangle up my code and throw me off track. Ill be willing to reward anyone who can help üôÇ" />
<meta name="twitter:description" content="As I am a beginner and still learning Java, can someone provide me with an improved NPC Chat system, similar to that of xent‚Äôs  BSH file system, but coded solely in java. I want to be able to write files to make npc‚Äôs talk that is a bit more organized looking  and much less time consuming. Also, importantly with the elimination of throwing in a DelayedEventHandler which tends to  tangle up my code and throw me off track. Ill be willing to reward anyone who can help üôÇ" />
<meta property="article:published_time" content="2012-09-16T00:14:50+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="459990.html">[REQ] Need better NpcChat system :(! [REQ]</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Snemo.html'><span itemprop='name'>Snemo</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-16T00:14:50Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:07:59Z' class='post-time'>
              August 4, 2016, 12:07am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>As I am a beginner and still learning Java, can someone provide me with an improved NPC Chat system, similar to that of xent‚Äôs</p>
<p>BSH file system, but coded solely in java. I want to be able to write files to make npc‚Äôs talk that is a bit more organized looking</p>
<p>and much less time consuming. Also, importantly with the elimination of throwing in a DelayedEventHandler which tends to</p>
<p>tangle up my code and throw me off track. Ill be willing to reward anyone who can help <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='[REQ] Need better NpcChat system :(! [REQ]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-16T04:25:40Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:08:16Z' class='post-time'>
              August 4, 2016, 12:08am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>There is a fork of MoparClassic that has a much better system, though, it uses Scala.</p>
<p>You can see some info about it here:<br>
<aside class="onebox githubissue">
  <header class="source">
      <a href="https://github.com/MoparClassic/MoparClassic/issues/15" target="_blank" rel="nofollow noopener">github.com/MoparClassic/MoparClassic</a>
  </header>
  <article class="onebox-body">
    <a href="https://github.com/Rodgerwilco" rel="nofollow noopener">
<img src="https://avatars1.githubusercontent.com/u/753216?v=2&amp;s=96" class="thumbnail onebox-avatar" width="420" height="420">
</a>

<h4><a href="https://github.com/MoparClassic/MoparClassic/issues/15" target="_blank" rel="nofollow noopener">Issue: Quests / Npcs / Content </a></h4>

<div class="date" style="margin-top:10px;">
	<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/Rodgerwilco" target="_blank" rel="nofollow noopener">Rodgerwilco</a>
	on <a href="https://github.com/MoparClassic/MoparClassic/issues/15" target="_blank" rel="nofollow noopener">2011-07-03</a>
	</div>
	<div class="user">
	closed by <a href="https://github.com/CodeForFame" target="_blank" rel="nofollow noopener">CodeForFame</a>
	on <a href="https://github.com/MoparClassic/MoparClassic/issues/15" target="_blank" rel="nofollow noopener">2013-08-13</a>
	</div>
</div>

<pre class="content" style="white-space: pre-wrap;">I feel like quests / npcs take too much time and effort to implement. xEnt released that npc script setup where...</pre>

<div class="labels">
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">Discussion</span>
 	<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">Todo</span>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>And you can find the actual code/fork here:<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://assets-cdn.github.com/favicon.ico" class="site-icon" width="32" height="32">
      <a href="https://github.com/Joe0/MoparClassic" target="_blank" rel="nofollow noopener">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="https://avatars1.githubusercontent.com/u/779888?s=400&amp;v=4" class="thumbnail onebox-avatar" width="400" height="400">

<h3><a href="https://github.com/Joe0/MoparClassic" target="_blank" rel="nofollow noopener">Joe0/MoparClassic</a></h3>

<p>MoparClassic - An emulator for an old java MMORPG</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
      </div>

      <meta itemprop='headline' content='[REQ] Need better NpcChat system :(! [REQ]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Snemo.html'><span itemprop='name'>Snemo</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-16T18:55:22Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:09:09Z' class='post-time'>
              August 4, 2016, 12:09am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks for your response; looks brilliant. But a few questions as to how to get it to work:</p>
<ol>
<li>
<p>How do i implement in the scala shit into the source so that it accepts scala?</p>
</li>
<li>
<p>Wheres the actual npchandler which handles these scala scripts?  <img src="../../images/emoji/twitter/confusedae52.png?v=5" title=":confused:" class="emoji" alt=":confused:"></p>
</li>
</ol>
<p>Sorry for being so nooby! Im still learning <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='[REQ] Need better NpcChat system :(! [REQ]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-16T19:20:10Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:09:11Z' class='post-time'>
              August 4, 2016, 12:09am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=‚ÄúSnemo, post:3, topic:459990‚Äù]Thanks for your response; looks brilliant. But a few questions as to how to get it to work:</p>
<ol>
<li>
<p>How do i implement in the scala shit into the source so that it accepts scala?</p>
</li>
<li>
<p>Wheres the actual npchandler which handles these scala scripts?  <img src="../../images/emoji/twitter/confusedae52.png?v=5" title=":confused:" class="emoji" alt=":confused:"></p>
</li>
</ol>
<p>Sorry for being so nooby! Im still learning :)[/quote]1) AFAIK you just need to include the Scala runtime/compiler and maybe a few lines in the packet handler.</p>
<ol start="2">
<li>They are the npc handlers‚Ä¶ Scala and Java appear no differently at runtime, seeing Scala is compiled into Java bytecode.</li>
</ol>
      </div>

      <meta itemprop='headline' content='[REQ] Need better NpcChat system :(! [REQ]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Snemo.html'><span itemprop='name'>Snemo</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-16T20:58:46Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:09:27Z' class='post-time'>
              August 4, 2016, 12:09am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Alright got everything done, but its giving me an error with InvItem, im using moparclassic‚Äôs InvItem.java version‚Ä¶</p>
<p>Error: Transact.scala:15 error: too many arguments for method add: (item: org.rscangel.gs.model.InvItem)Int</p>
<p>[scalac] receive foreach (i =&gt; player.getInventory.add(i._1, i._2))<br>
[scalac] one error found                                              ^</p>
      </div>

      <meta itemprop='headline' content='[REQ] Need better NpcChat system :(! [REQ]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/latifundio.html'><span itemprop='name'>latifundio</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-18T14:02:16Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:11:49Z' class='post-time'>
              August 4, 2016, 12:11am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=‚ÄúSnemo, post:5, topic:459990‚Äù]Error: Transact.scala:15 error: too many arguments for method add: (item: org.rscangel.gs.model.InvItem)Int</p>
<p>[scalac] receive foreach (i =&gt; player.getInventory.add(i._1, i._2))<br>
[scalac] one error found                                              ^[/quote]</p>
<p>Sometimes you may want to avoid using transact, I had some problems with Apothecary but doing it like this did work fine for me.</p>
<p>[code=scala]	lazy val option1 = new NpcDialog(‚ÄúCan you make a strength potion?‚Äù) {</p>
<pre><code>	override def begin {
		breath
		this &gt; "Yes but I will need one limpwurt root, one spider egg"; breath
		this &gt; "and 5 gold coins, and I will make you one"; breath
		end
	}

	this + new GenericEnd("I have all the ingredients", npc, player) {
		override def begin {
			if (player.getInventory.remove(10, 5) 
					&amp;&amp; player.getInventory.remove(219, 1)
					&amp;&amp; player.getInventory.remove(220, 1)) {
				player.getActionSender.sendInventory; breath
				this &gt;&gt; "Apothecary start mixing the ingredients.."; breath
				player.getInventory.add(221)
				player.getActionSender.sendInventory
				this &gt;&gt; "he hands you a Strength Potion (4 dose)"
			}
			else {
				breath
				this &gt; "You still don't have everything I asked for"; breath
				this &lt; "Oh ..I will come back later then" 
			}
			super.begin
		}
	}
	
	this + new GenericEnd("Ok, I will get the ingredients", npc, player)
}

lazy val option2 = new Transact("Have you got any good potions to give away?",
	Array[(Int, Int)](), Array((58, 1)), Array[String](), npc, player) {
	override def success {
		this &gt; "Only that spot cream, hope you enjoy it!"; pause(1500)
		this &gt;&gt; "Apothecary hands you a misterious potion" 
		super.success
	}
}[/code]</code></pre>
      </div>

      <meta itemprop='headline' content='[REQ] Need better NpcChat system :(! [REQ]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-18T14:08:03Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:11:49Z' class='post-time'>
              August 4, 2016, 12:11am
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>That new system is quite nice  :eek:</p>
      </div>

      <meta itemprop='headline' content='[REQ] Need better NpcChat system :(! [REQ]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-18T14:31:46Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:11:50Z' class='post-time'>
              August 4, 2016, 12:11am
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=‚Äúlatifundio, post:6, topic:459990‚Äù][quote author=Snemo link=topic=562901.msg4104567#msg4104567 date=1347829126]<br>
Error: Transact.scala:15 error: too many arguments for method add: (item: org.rscangel.gs.model.InvItem)Int</p>
<p>[scalac] receive foreach (i =&gt; player.getInventory.add(i._1, i._2))<br>
[scalac] one error found                                              ^<br>
[/quote]</p>
<p>Sometimes you may want to avoid using transact, I had some problems with Apothecary but doing it like this did work fine for me.</p>
<p>[code=scala]	lazy val option1 = new NpcDialog(‚ÄúCan you make a strength potion?‚Äù) {</p>
<pre><code>	override def begin {
		breath
		this &gt; "Yes but I will need one limpwurt root, one spider egg"; breath
		this &gt; "and 5 gold coins, and I will make you one"; breath
		end
	}

	this + new GenericEnd("I have all the ingredients", npc, player) {
		override def begin {
			if (player.getInventory.remove(10, 5) 
					&amp;&amp; player.getInventory.remove(219, 1)
					&amp;&amp; player.getInventory.remove(220, 1)) {
				player.getActionSender.sendInventory; breath
				this &gt;&gt; "Apothecary start mixing the ingredients.."; breath
				player.getInventory.add(221)
				player.getActionSender.sendInventory
				this &gt;&gt; "he hands you a Strength Potion (4 dose)"
			}
			else {
				breath
				this &gt; "You still don't have everything I asked for"; breath
				this &lt; "Oh ..I will come back later then" 
			}
			super.begin
		}
	}
	
	this + new GenericEnd("Ok, I will get the ingredients", npc, player)
}

lazy val option2 = new Transact("Have you got any good potions to give away?",
	Array[(Int, Int)](), Array((58, 1)), Array[String](), npc, player) {
	override def success {
		this &gt; "Only that spot cream, hope you enjoy it!"; pause(1500)
		this &gt;&gt; "Apothecary hands you a misterious potion" 
		super.success
	}
}[/code][/quote]It looks like there is a bug in transact...
</code></pre>
<p><code>	private def hasItems(items : Array[(Int, Int)]) = {
		items find {
			item =&gt;
				if (_player.getInventory.countId(item._1) &gt;= item._2) false
				else true
		} match {
			case Some(x) =&gt; false
			case None =&gt; true
		}
	}
</code>Appears to be broken.</p>
      </div>

      <meta itemprop='headline' content='[REQ] Need better NpcChat system :(! [REQ]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/req-need-better-npcchat-system-req/459990 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 19:32:58 GMT -->
</html>
