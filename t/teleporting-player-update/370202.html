<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/teleporting-player-update/370202 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 10:57:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Teleporting player update? - Runescape - moparisthebest.com</title>
    <meta name="description" content="player1 and player2 are in varrock center. player1 teleports to varrock center. on player1&amp;#39;s screen he teleported over so many X and Y. but on player2&amp;#39;s screen it shows that player1 did a teleport animation but never mov&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="370202.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Teleporting player update?&#39;" href="370202.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/teleporting-player-update/370202" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/teleporting-player-update/370202" />
<meta property="og:title" content="Teleporting player update?" />
<meta name="twitter:title" content="Teleporting player update?" />
<meta property="og:description" content="player1 and player2 are in varrock center.  player1 teleports to varrock center.  on player1‚Äôs screen he teleported over so many X and Y.  but on player2‚Äôs screen it shows that player1 did a teleport animation but never moved from his spot.  now if player1 teleported from falador to varrock, player2‚Äôs screen would show player1.  ^ That is the most simple way of explaining the bug ^  Any suggestions?  üòë" />
<meta name="twitter:description" content="player1 and player2 are in varrock center.  player1 teleports to varrock center.  on player1‚Äôs screen he teleported over so many X and Y.  but on player2‚Äôs screen it shows that player1 did a teleport animation but never moved from his spot.  now if player1 teleported from falador to varrock, player2‚Äôs screen would show player1.  ^ That is the most simple way of explaining the bug ^  Any suggestions?  üòë" />
<meta property="article:published_time" content="2010-11-24T20:41:12+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="370202.html">Teleporting player update?</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/LKCTheReturn.html'><span itemprop='name'>LKCTheReturn</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-11-24T20:41:12Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:09:42Z' class='post-time'>
              August 1, 2016,  1:09am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>player1 and player2 are in varrock center.<br>
player1 teleports to varrock center.<br>
on player1‚Äôs screen he teleported over so many X and Y.<br>
but on player2‚Äôs screen it shows that player1 did a teleport animation but never moved from his spot.<br>
now if player1 teleported from falador to varrock, player2‚Äôs screen would show player1.</p>
<p>^ That is the most simple way of explaining the bug ^</p>
<p>Any suggestions?  <img src="../../images/emoji/twitter/expressionlessae52.png?v=5" title=":expressionless:" class="emoji" alt=":expressionless:"></p>
      </div>

      <meta itemprop='headline' content='Teleporting player update?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/usman555.html'><span itemprop='name'>usman555</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-11-24T20:53:09Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:09:43Z' class='post-time'>
              August 1, 2016,  1:09am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Suggestion:</p>
<p>Why not tell us your revision and base?</p>
      </div>

      <meta itemprop='headline' content='Teleporting player update?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/LKCTheReturn.html'><span itemprop='name'>LKCTheReturn</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-11-24T20:54:24Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:09:43Z' class='post-time'>
              August 1, 2016,  1:09am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>It was based off of cheezescape, an old base called karmascape. 317</p>
      </div>

      <meta itemprop='headline' content='Teleporting player update?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xaviergmail.html'><span itemprop='name'>xaviergmail</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-11-24T21:39:55Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:09:45Z' class='post-time'>
              August 1, 2016,  1:09am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>tele 0,0 then X,Y<br>
I don‚Äôt remember the exact command for 317‚Äôs but here‚Äôs the idea</p>
<p><code>
teleTo(0, 0);
teleTo(X, Y);</code></p>
      </div>

      <meta itemprop='headline' content='Teleporting player update?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="2" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/LKCTheReturn.html'><span itemprop='name'>LKCTheReturn</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-11-25T02:13:39Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:10:05Z' class='post-time'>
              August 1, 2016,  1:10am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=‚Äúxaviergmail, post:4, topic:370202‚Äù]tele 0,0 then X,Y<br>
I don‚Äôt remember the exact command for 317‚Äôs but here‚Äôs the idea</p>
<p><code>
teleTo(0, 0);
teleTo(X, Y);</code>[/quote]<br>
I‚Äôd prefer not :\</p>
      </div>

      <meta itemprop='headline' content='Teleporting player update?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/system.html'><span itemprop='name'>system</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-11-25T02:46:11Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:10:08Z' class='post-time'>
              August 1, 2016,  1:10am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><span class="bbcode-b">The problem</span><br>
The problem is <span class="bbcode-i">probably</span> the server sending the ‚ÄúsendMapRegion‚Äù packet for the player so they see themselves teleporting, however the server is not triggering movement update sector 2,3 which is teleport for this player and remove from local list for non-this players. Speaking of which, I still need to add this feature to my server base RuneSource.</p>
<p>Basically, you‚Äôre going to need to modify player updating so that if they teleported, they should be removed from the local list for other players (movement sector 2,3) then re-added with the new delta coordinates. You‚Äôre going to need a ‚Äúteleporting‚Äù flag so the updating system can check if they‚Äôre teleporting, in which case it sends bits:</p>
<p><span class="bbcode-u">Remove other player from local list</span></p>
<pre><code class="lang-auto">1, 1
2, 3</code></pre>
<p>Then, inherently, if the player is still local but not in the player list, the updating system should automatically re-add to the local list with the new delta coordinates:</p>
<p><span class="bbcode-u">Add to local list</span></p>
<pre><code class="lang-auto">11, slot
1, 1
1, 1
5, deltaY
5, deltaX</code></pre>
<p>After which you force an appearance update during state updating.</p>
<p><span class="bbcode-b">The solution</span><br>
This can be found in one of the very first bases, blakescape d boosted:</p>
<pre><code class="lang-auto">         if(!plr.playerList[i].didTeleport &amp;&amp; plr.withinDistance(plr.playerList[i])) {
            plr.playerList[i].updatePlayerMovement(str);
            plr.playerList[i].appendPlayerUpdateBlock(updateBlock);
            plr.playerList[plr.playerListSize++] = plr.playerList[i];
         }
         else {
            int id = plr.playerList[i].playerId;
            plr.playerInListBitmap[id&gt;&gt;3] &amp;= ~(1 &lt;&lt; (id&amp;7));      // clear the flag
            str.writeBits(1, 1);
            str.writeBits(2, 3);      // tells client to remove this char from list
         }</code></pre>
<p>The important line, of course, is:</p>
<pre><code class="lang-auto">if(!plr.playerList[i].didTeleport &amp;&amp; plr.withinDistance(plr.playerList[i])) {</code></pre>
<p>Where it makes sure that they did not teleport ("!plr.playerList[i ].didTeleport"), and if they did, go down to remove the player from the local list and they will be re-added automatically by the updating system in in the following loop. <span class="bbcode-b">Basically, what you need to do is remove the player from the local list if they teleported, the updating system should take care of re-adding them if need be.</span></p>
<p>[quote=‚Äúxaviergmail, post:4, topic:370202‚Äù]tele 0,0 then X,Y<br>
I don‚Äôt remember the exact command for 317‚Äôs but here‚Äôs the idea</p>
<p><code>
teleTo(0, 0);
teleTo(X, Y);</code>[/quote]<br>
This solution works because it teleports the player far enough away to get them <span class="bbcode-b">removed from the local list</span>, then when it teleports back they will be <span class="bbcode-b">re-added to the local list</span> if they are nearby. It‚Äôs a cheap way of doing things, but it works as well. I recommend doing what I said, though.</p>
<p>Hope that helps you out man.</p>
      </div>

      <meta itemprop='headline' content='Teleporting player update?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Mendorphins.html'><span itemprop='name'>Mendorphins</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-11-25T02:54:07Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:10:08Z' class='post-time'>
              August 1, 2016,  1:10am
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>^Wow, if you don‚Äôt try that then GTFO.</p>
      </div>

      <meta itemprop='headline' content='Teleporting player update?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/teleporting-player-update/370202 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 10:57:16 GMT -->
</html>
