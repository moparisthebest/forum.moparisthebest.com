<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/rapidshare-api/347653 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 03:55:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Rapidshare API - General Programming - moparisthebest.com</title>
    <meta name="description" content="http://rapidshare.com/dev.html 

Saw this, haven&amp;#39;t seen any-one post about it before! I&amp;#39;m going to write a remote download script so my unix box can init downloads when i&amp;#39;m at work by passing it a link :slight_smile: 

h&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="347653.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Rapidshare API&#39;" href="347653.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/rapidshare-api/347653" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/rapidshare-api/347653" />
<meta property="og:title" content="Rapidshare API" />
<meta name="twitter:title" content="Rapidshare API" />
<meta property="og:description" content="http://rapidshare.com/dev.html  Saw this, havenâ€™t seen any-one post about it before! Iâ€™m going to write a remote download script so my unix box can init downloads when iâ€™m at work by passing it a link ğŸ™‚  here is an example of the api in use:  [code]#!/usr/bin/perl  Version 2.2.4 (9th May 2009) RapidShare AG OpenSource Perl Uploader. For non-commercial use only. All rights reserved. USE AT YOUR OWN RISK! Features: - Uploading to free, collectorâ€™s zone and premium zone. - Supports MD5..." />
<meta name="twitter:description" content="http://rapidshare.com/dev.html  Saw this, havenâ€™t seen any-one post about it before! Iâ€™m going to write a remote download script so my unix box can init downloads when iâ€™m at work by passing it a link ğŸ™‚  here is an example of the api in use:  [code]#!/usr/bin/perl  Version 2.2.4 (9th May 2009) RapidShare AG OpenSource Perl Uploader. For non-commercial use only. All rights reserved. USE AT YOUR OWN RISK! Features: - Uploading to free, collectorâ€™s zone and premium zone. - Supports MD5..." />
<meta property="article:published_time" content="2010-07-06T20:45:10+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="347653.html">Rapidshare API</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ollie.html'><span itemprop='name'>Ollie</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-07-06T20:45:10Z'>
            <time itemprop='dateModified' datetime='2016-07-31T17:36:18Z' class='post-time'>
              July 31, 2016,  5:36pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a href="http://rapidshare.com/dev.html" class="onebox" target="_blank" rel="nofollow noopener">http://rapidshare.com/dev.html</a></p>
<p>Saw this, havenâ€™t seen any-one post about it before! Iâ€™m going to write a remote download script so my unix box can init downloads when iâ€™m at work by passing it a link <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>here is an example of the api in use:</p>
<p>[code]#!/usr/bin/perl</p>
<h1>Version 2.2.4 (9th May 2009)</h1>
<h1>RapidShare AG OpenSource Perl Uploader. For non-commercial use only. All rights reserved. USE AT YOUR OWN RISK!</h1>
<h1>Features:</h1>
<h1>- Uploading to free, collectorâ€™s zone and premium zone.</h1>
<h1>- Supports MD5 check after uploads to check if the upload worked.</h1>
<h1>- Supports upload resume to continue aborted uploads. Upload needs to be completed within 24 hours.</h1>
<h1>- Supports new RealFolders for premium and collectorâ€™s accounts.</h1>
<h1>- Supports uploading whole directories in RealFolders.</h1>
<h1>- Supports update modes and trash modes to update remote files without changing file IDs.</h1>
<h1>Syntax: rsapiresume.pl &lt;filename/folder&gt; &lt;free|prem|col&gt; [login] [password] [updatemode] [trashmode]</h1>
<h1>Update=0: Traditional uploading. No duplicate checking.</h1>
<h1>Update=1: The lowest file ID duplicate will be overwritten if MD5 differs. Other duplicates will be handled using the trash flag.</h1>
<h1>Trash=0: No trashing.</h1>
<h1>Trash=1: Files will be moved to trash RealFolder (999)</h1>
<h1>Trash=2: Files will be DELETED! (not undoable)</h1>
<h1>To upload a file, put this script on a Linux machine with perl installed and use the following syntax:</h1>
<h1>perl rsapiresume.pl mytestfile.rar free        (this uploads mytestfile.rar as a free user)</h1>
<h1>perl rsapiresume.pl archive.rar prem 334 test  (this uploads archive.rar to the premium zone of login 334 with password test)</h1>
<h1>perl rsapiresume.pl a.rar col testuser mypw    (this uploads a.rar to the collectorâ€™s zone of login testuser with password mypw)</h1>
<h1>perl rsapiresume.pl prem myfolder 334 mypw 1 1</h1>
<h1>This uploads the folder myfolder and all subfolders to the premium zone of login 334 with password mypw.</h1>
<h1>Update=1 will not upload files already existing with same md5. Existing but different files will be overwritten without</h1>
<h1>changing the download link. Multiple duplicates will be moved to the RealFolder 999 (Trash), because we set the trash value to 1.</h1>
<p>use strict;<br>
use warnings;<br>
use Digest::MD5(â€œmd5_hexâ€);<br>
use Fcntl;<br>
use IO::Socket;<br>
use LWP::Simple;</p>
<p>my ($FILE, $TYPE, $LOGIN, $PASSWORD, $UPDATEMODE, %ESCAPES, $TRASHMODE, %PARENTANDNAME_REALFOLDER);</p>
<p>$/ = undef;<br>
$SIG{PIPE} = $SIG{HUP} = â€˜IGNOREâ€™;<br>
$FILE = $ARGV[0] || â€œâ€;<br>
$TYPE = $ARGV[1] || â€œâ€;<br>
$LOGIN = $ARGV[2] || â€œâ€;<br>
$PASSWORD = $ARGV[3] || â€œâ€;<br>
$UPDATEMODE = $ARGV[4] || 0;<br>
$TRASHMODE = $ARGV[5] || 0;</p>
<p>unless ($TYPE) { die â€œSyntax: $0 &lt;filename/folder&gt; &lt;free|prem|col&gt; [login] [password] [updatemode] [trashmode]\nâ€ }<br>
unless (-e $FILE) { die â€œFile not found.\nâ€ }</p>
<p>if (-d $FILE) {<br>
unless ($LOGIN and $PASSWORD) { die â€œFolder upload not supported for anonymous uploads.\nâ€ }</p>
<p>print â€œCounting all folders and files in $FILEâ€¦\nâ€;<br>
my ($numfiles, $numfolders, $numbytes) = &amp;countfiles($FILE);<br>
printf(â€œYou want to upload $numfiles files in $numfolders folders having $numbytes bytes (%.2f MB)\nâ€, $numbytes / 1000000);<br>
if ($numfiles &gt; 1000) { die â€œMore than 1000 files? You should not do thatâ€¦\nâ€ }<br>
if ($numfolders &gt; 100) { die â€œMore than 100 folders? You should not do thatâ€¦\nâ€ }<br>
if ($numbytes &gt; 100_000_000_000) { die â€œMore than 100 Gigabytes? You should not do thatâ€¦\nâ€ }</p>
<p>print â€œUploading folder $FILEâ€¦\nâ€;<br>
&amp;listrealfolders($TYPE, $LOGIN, $PASSWORD);<br>
&amp;uploadfolder($FILE, $TYPE, $LOGIN, $PASSWORD);<br>
} else {<br>
&amp;uploadfile($FILE, $TYPE, $LOGIN, $PASSWORD);<br>
}</p>
<p>print â€œAll done.\nâ€;<br>
exit;</p>
<p>sub countfiles {<br>
my $dir = shift || die;</p>
<p>my ($filename, $numfiles, $numfolders, $numbytes, $subnumfiles, $subnumfolders, $subnumbytes);</p>
<p>foreach $filename (glob("$dir/*")) {<br>
if ($filename =~ /.uploaddata$/) { next }</p>
<pre><code>if (-d $filename) {
  ($subnumfiles, $subnumfolders, $subnumbytes) = &amp;countfiles($filename);
  $numfiles += $subnumfiles;
  $numfolders++;
  $numbytes += $subnumbytes;
} else {
  $numfiles++;
  $numbytes += -s $filename || 0;
}
</code></pre>
<p>}</p>
<p>return ($numfiles || 0, $numfolders || 0, $numbytes || 0);<br>
}</p>
<p>sub uploadfolder {<br>
my $file = shift || die;<br>
my $type = shift || die;<br>
my $login = shift || â€œâ€;<br>
my $password = shift || â€œâ€;<br>
my $parent = shift || 0;</p>
<p>my ($realfolder, $filename, $htmllogin, $htmlpassword, $htmlname, $mode);</p>
<p>$realfolder = $PARENTANDNAME_REALFOLDER{"$parent,$file"} || 0;<br>
$mode = â€œexistedâ€;</p>
<p>unless ($realfolder) {<br>
$htmllogin = &amp;htmlencode($login);<br>
$htmlpassword = &amp;htmlencode($password);<br>
$htmlname = &amp;htmlencode($file);<br>
$realfolder = get(â€œ<a href="http://api.rapidshare.com/cgi-bin/rsapi.cgi?sub=addrealfolder_v1&amp;type=%24type&amp;login=%24htmllogin&amp;password=%24htmlpassword&amp;name=%24htmlname&amp;parent=%24parent" rel="nofollow noopener">http://api.rapidshare.com/cgi-bin/rsapi.cgi?sub=addrealfolder_v1&amp;type=$type&amp;login=$htmllogin&amp;password=$htmlpassword&amp;name=$htmlname&amp;parent=$parent</a>â€) || â€œâ€;<br>
if (not $realfolder or $realfolder =~ /^ERROR: /) { die â€œAPI Error occured: $realfolder\nâ€ }<br>
$mode = â€œcreatedâ€;<br>
unless ($realfolder =~ /^\d+$/) { die â€œError adding RealFolder: $realfolder\nâ€ }<br>
}</p>
<p>print â€œFolder $file resolved to ID $realfolder ($mode)\nâ€;</p>
<p>foreach $filename (glob("$file/*")) {<br>
if ($filename =~ /.uploaddata$/) { next }<br>
if (-d $filename) { &amp;uploadfolder($filename, $type, $login, $password, $realfolder) } else { &amp;uploadfile($filename, $type, $login, $password, $realfolder) }<br>
}</p>
<p>return â€œâ€;<br>
}</p>
<p>sub listrealfolders {<br>
my $type = shift || die;<br>
my $login = shift || die;<br>
my $password = shift || die;</p>
<p>my ($htmllogin, $htmlpassword, $result, $realfolder, $parent, $name);</p>
<p>$htmllogin = &amp;htmlencode($login);<br>
$htmlpassword = &amp;htmlencode($password);</p>
<p>$result = get(â€œ<a href="http://api.rapidshare.com/cgi-bin/rsapi.cgi?sub=listrealfolders_v1&amp;login=%24htmllogin&amp;password=%24htmlpassword&amp;type=%24type" rel="nofollow noopener">http://api.rapidshare.com/cgi-bin/rsapi.cgi?sub=listrealfolders_v1&amp;login=$htmllogin&amp;password=$htmlpassword&amp;type=$type</a>â€) || â€œâ€;<br>
if (not $result or $result =~ /^ERROR: /) { die â€œAPI Error occured: $result\nâ€ }</p>
<p>foreach (split(/\n/, $result)) {<br>
($realfolder, $parent, $name) = split(/,/, $_, 3);<br>
$PARENTANDNAME_REALFOLDER{"$parent,$name"} = $realfolder;<br>
}</p>
<p>return â€œâ€;<br>
}</p>
<p>sub finddupes {<br>
my $type = shift || die;<br>
my $login = shift || die;<br>
my $password = shift || die;<br>
my $realfolder = shift || 0;<br>
my $filename = shift || â€œâ€;</p>
<p>my ($header, $result, $htmllogin, $htmlpassword, $htmlfilename, $fileid, $size, $killcode, $md5hex, $serverid);</p>
<p>$htmllogin = &amp;htmlencode($login);<br>
$htmlpassword = &amp;htmlencode($password);<br>
$htmlfilename = &amp;htmlencode($filename);<br>
$result = get(â€œ<a href="http://api.rapidshare.com/cgi-bin/rsapi.cgi?sub=listfiles_v1&amp;login=%24htmllogin&amp;password=%24htmlpassword&amp;type=%24type&amp;realfolder=%24realfolder&amp;filename=%24htmlfilename&amp;fields=size,killcode,serverid,md5hex&amp;order=fileid" rel="nofollow noopener">http://api.rapidshare.com/cgi-bin/rsapi.cgi?sub=listfiles_v1&amp;login=$htmllogin&amp;password=$htmlpassword&amp;type=$type&amp;realfolder=$realfolder&amp;filename=$htmlfilename&amp;fields=size,killcode,serverid,md5hex&amp;order=fileid</a>â€) || â€œâ€;</p>
<p>if (not $result or $result =~ /^ERROR: /) { die â€œAPI Error occured: $result\nâ€ }<br>
if ($result eq â€œNONEâ€) { print â€œFINDDUPES: No dupe detected.\nâ€; return (0,0,0,0,0) }</p>
<p>foreach (split(/\n/, $result)) {<br>
unless ($_ =~ /^(\d+),(\d+),(\d+),(\d+),(\w+)/) { die â€œFINDDUPES: Unexpected result: $result\nâ€ }<br>
unless ($fileid) { $fileid = $1; $size = $2; $killcode = $3; $serverid = $4; $md5hex = lc($5); next }<br>
print â€œFINDDUPES: Deleting dupe $1\nâ€;<br>
&amp;deletefile($1, $3);<br>
}</p>
<p>return ($fileid, $size, $killcode, $serverid, $md5hex);<br>
}</p>
<p>sub deletefile {<br>
my $fileid = shift || die;<br>
my $killcode = shift || die;</p>
<p>if ($TRASHMODE == 1) {<br>
print â€œDELETEFILE: Moving file $fileid to trash RealFolder 999.\nâ€;<br>
my $result = get(â€œ<a href="http://api.rapidshare.com/cgi-bin/rsapi.cgi?sub=movefilestorealfolder_v1&amp;files=f%24fileid%22.%22k%24killcode&amp;realfolder=999" rel="nofollow noopener">http://api.rapidshare.com/cgi-bin/rsapi.cgi?sub=movefilestorealfolder_v1&amp;files=f$fileid"."k$killcode&amp;realfolder=999</a>â€) || â€œâ€;<br>
if ($result ne â€œOKâ€) { die â€œDELETEFILE: Unexpected server reply: $result\nâ€ }<br>
}</p>
<p>elsif ($TRASHMODE == 2) {<br>
print â€œDELETEFILE: DELETING file $fileid.\nâ€;<br>
my $result = get(â€œ<a href="http://api.rapidshare.com/cgi-bin/rsapi.cgi?sub=deletefiles_v1&amp;files=f%24fileid%22.%22k%24killcode" rel="nofollow noopener">http://api.rapidshare.com/cgi-bin/rsapi.cgi?sub=deletefiles_v1&amp;files=f$fileid"."k$killcode</a>â€) || â€œâ€;<br>
if ($result ne â€œOKâ€) { die â€œDELETEFILE: Unexpected server reply: $result\nâ€ }<br>
}</p>
<p>else {<br>
print â€œDELETEFILE: Doing nothing with file $fileid, because trash mode is 0.\nâ€;<br>
}</p>
<p>return â€œâ€;<br>
}</p>
<p>sub uploadfile {<br>
my $file = shift || die;<br>
my $type = shift || die;<br>
my $login = shift || â€œâ€;<br>
my $password = shift || â€œâ€;<br>
my $realfolder = shift || 0;</p>
<p>my ($size, $filecontent, $md5hex, $size2, $uploadserver, $cursize, $dupefileid, $dupesize, $dupekillcode, $dupemd5hex);</p>
<h1>This chapter checks the file and calculates the MD5HEX of the existing local file.</h1>
<p>$size = -s $file || die â€œFile $file is empty or does not exist!\nâ€;<br>
print "File $file\n$size has byte. Full file MD5 isâ€¦ ";<br>
open(FH, $file) || die â€œUnable to open file: $!\nâ€;<br>
binmode(FH);<br>
$filecontent = ;<br>
close(FH);<br>
$md5hex = md5_hex($filecontent);<br>
$size2 = length($filecontent);<br>
print â€œ$md5hex\nâ€;<br>
unless ($size == $size2) { die â€œStrange error: $size byte found, but only $size2 byte analyzed?\nâ€ }</p>
<p>if ($UPDATEMODE and $login and $password) {<br>
($dupefileid, $dupesize, $dupekillcode, $uploadserver, $dupemd5hex) = &amp;finddupes($type, $login, $password, $realfolder, $file);<br>
if ($md5hex eq $dupemd5hex) { print â€œFILE ALREADY UP TO DATE! Server <a href="http://rs%24uploadserver.rapidshare.com/" rel="nofollow noopener">rs$uploadserver.rapidshare.com</a> in file ID $dupefileid.\n\nâ€; return â€œâ€ }<br>
if ($dupefileid) { print â€œUPDATING FILE $dupefileid on server <a href="http://rs%24uploadserver.rapidshare.com/" rel="nofollow noopener">rs$uploadserver.rapidshare.com</a> ($type)\nâ€ }<br>
}</p>
<p>unless ($uploadserver) {<br>
print â€œGetting a free upload serverâ€¦\nâ€;<br>
$uploadserver = get(â€œ<a href="http://api.rapidshare.com/cgi-bin/rsapi.cgi?sub=nextuploadserver_v1" rel="nofollow noopener">http://api.rapidshare.com/cgi-bin/rsapi.cgi?sub=nextuploadserver_v1</a>â€) || â€œâ€;<br>
if (not $uploadserver or $uploadserver =~ /^ERROR: /) { die â€œAPI Error occured: $uploadserver\nâ€ }<br>
print â€œUploading to <a href="http://rs%24uploadserver.rapidshare.com/" rel="nofollow noopener">rs$uploadserver.rapidshare.com</a> ($type)\nâ€;<br>
}</p>
<p>$cursize = 0;<br>
while ($cursize &lt; $size) { $cursize = &amp;uploadchunk($file, $type, $login, $password, $realfolder, $md5hex, $size, $cursize, â€œ<a href="http://rs%24uploadserver.rapidshare.com/" rel="nofollow noopener">rs:80$uploadserver.rapidshare.com</a>â€, $dupefileid, $dupekillcode) }</p>
<p>return â€œâ€;<br>
}</p>
<p>sub uploadchunk {<br>
my $file = shift || die;<br>
my $type = shift || die;<br>
my $login = shift || â€œâ€;<br>
my $password = shift || â€œâ€;<br>
my $realfolder = shift || 0;<br>
my $md5hex = shift || die;<br>
my $size = shift || die;<br>
my $cursize = shift || 0;<br>
my $fulluploadserver = shift || die;<br>
my $replacefileid = shift || 0;<br>
my $replacekillcode = shift || 0;<br>
my $bodtype = shift || 0;</p>
<p>my ($uploaddata, $wantchunksize, $fh, $socket, $boundary, $contentheader, $contenttail, $contentlength, $header, $chunks, $chunksize,<br>
$bufferlen, $buffer, $result, $fileid, $complete, $resumed, $filename, $killcode, $remotemd5hex, $chunkmd5hex);</p>
<p>if (-e â€œ$file.uploaddataâ€) {<br>
open(I, â€œ$file.uploaddataâ€) or die â€œUnable to open file: $!\nâ€;<br>
($fulluploadserver, $fileid, $killcode) = split(/\n/, <i>);<br>
print â€œRESUMING UPLOAD! Uploadserver=$fulluploadserver\nFile-ID=$fileid\nKillcode=$killcode\nâ€;<br>
close(I);<br>
print â€œRequesting authorization for upload resumeâ€¦\nâ€;<br>
$cursize = get(â€œ<a href="http://api.rapidshare.com/cgi-bin/rsapi.cgi?sub=checkincomplete_v1&amp;fileid=%24fileid&amp;killcode=%24killcode" rel="nofollow noopener">http://api.rapidshare.com/cgi-bin/rsapi.cgi?sub=checkincomplete_v1&amp;fileid=$fileid&amp;killcode=$killcode</a>â€) || â€œâ€;<br>
unless ($cursize =~ /^\d+$/) { die â€œUnable to resume! Please delete $file.uploaddata or try again.\nâ€ }<br>
print â€œThe upload stopped at $cursize on server $fulluploadserver.\nâ€;<br>
$resumed = 1;<br>
}</i></p>
<p>$wantchunksize = 1000000;</p>
<p>if ($size &gt; $wantchunksize) {<br>
$chunks = 1;<br>
$chunksize = $size - $cursize;<br>
if ($chunksize &gt; $wantchunksize) { $chunksize = $wantchunksize } else { $complete = 1 }<br>
} else {<br>
$chunks = 0;<br>
$chunksize = $size;<br>
}</p>
<p>print â€œUpload chunk is $chunksize byte starting at $cursize.\nâ€;</p>
<p>sysopen($fh, $file, O_RDONLY) || die â€œUnable to open file: $!\nâ€;<br>
$filename = $file =~ /<a>/\</a>$/ ? $1 : $file;<br>
$socket = IO::Socket::INET-&gt;new(PeerAddr =&gt; $fulluploadserver) || die â€œUnable to open socket: $!\nâ€;<br>
$boundary = â€œ---------------------632865735RS4EVER5675865â€;<br>
$contentheader .= qq|$boundary\r\nContent-Disposition: form-data; name=â€œrsapi_v1â€\r\n\r\n1\r\n|;</p>
<p>if ($resumed) {<br>
$contentheader .= qq|$boundary\r\nContent-Disposition: form-data; name=â€œfileidâ€\r\n\r\n$fileid\r\n|;<br>
$contentheader .= qq|$boundary\r\nContent-Disposition: form-data; name=â€œkillcodeâ€\r\n\r\n$killcode\r\n|;<br>
if ($complete) { $contentheader .= qq|$boundary\r\nContent-Disposition: form-data; name=â€œcompleteâ€\r\n\r\n1\r\n| }<br>
} else {<br>
if ($type eq â€œpremâ€ and $login and $password) { $contentheader .= qq|$boundary\r\nContent-Disposition: form-data; name=â€œloginâ€\r\n\r\n$login\r\n| }<br>
if ($type eq â€œcolâ€ and $login and $password) { $contentheader .= qq|$boundary\r\nContent-Disposition: form-data; name=â€œfreeaccountidâ€\r\n\r\n$login\r\n| }</p>
<pre><code>$contentheader .= qq|$boundary\r\nContent-Disposition: form-data; name="password"\r\n\r\n$password\r\n|;
$contentheader .= qq|$boundary\r\nContent-Disposition: form-data; name="realfolder"\r\n\r\n$realfolder\r\n|;
$contentheader .= qq|$boundary\r\nContent-Disposition: form-data; name="replacefileid"\r\n\r\n$replacefileid\r\n|;
$contentheader .= qq|$boundary\r\nContent-Disposition: form-data; name="replacekillcode"\r\n\r\n$replacekillcode\r\n|;
$contentheader .= qq|$boundary\r\nContent-Disposition: form-data; name="bodtype"\r\n\r\n$bodtype\r\n|;

if ($chunks) { $contentheader .= qq|$boundary\r\nContent-Disposition: form-data; name="incomplete"\r\n\r\n1\r\n| }
</code></pre>
<p>}</p>
<p>$contentheader .= qq|$boundary\r\nContent-Disposition: form-data; name=â€œfilecontentâ€; filename="$filename"\r\n\r\n|;<br>
$contenttail = â€œ\r\n$boundaryâ€“\r\nâ€;<br>
$contentlength = length($contentheader) + $chunksize + length($contenttail);</p>
<p>if ($resumed) {<br>
$header = qq|POST /cgi-bin/uploadresume.cgi HTTP/1.0\r\nContent-Type: multipart/form-data; boundary=$boundary\r\nContent-Length: $contentlength\r\n\r\n|;<br>
} else {<br>
$header = qq|POST /cgi-bin/upload.cgi HTTP/1.0\r\nContent-Type: multipart/form-data; boundary=$boundary\r\nContent-Length: $contentlength\r\n\r\n|;<br>
}</p>
<p>print $socket â€œ$header$contentheaderâ€;</p>
<p>sysseek($fh, $cursize, 0);<br>
$bufferlen = sysread($fh, $buffer, $wantchunksize) || 0;<br>
unless ($bufferlen) { die â€œError while reading file: $!\nâ€ }<br>
$chunkmd5hex = md5_hex($buffer);<br>
print â€œSending $bufferlen byteâ€¦\nâ€;<br>
$cursize += $bufferlen;<br>
print $socket $buffer;<br>
print $socket $contenttail;<br>
print â€œReading server responseâ€¦\nâ€;<br>
($result) = &lt;$socket&gt; =~ /\r\n\r\n(.+)/s;<br>
unless ($result) { die â€œOoops! Did not receive any valid server results?\nâ€ }</p>
<p>if ($resumed) {<br>
if ($complete) {<br>
if ($result =~ /^COMPLETE,(\w+)/) {<br>
print â€œUpload completed! Remote MD5=$1 Local MD5=$md5hex\nâ€;<br>
if ($md5hex ne $1) { die â€œMD5 CHECK NOT PASSED!\nâ€ }<br>
print â€œMD5 check passed. Upload OK! Saving status to rsapiuploads.txt\n\nâ€;<br>
unlink("$file.uploaddata");<br>
} else {<br>
die â€œUnexpected server response!\nâ€;<br>
}<br>
} else {<br>
if ($result =~ /^CHUNK,(\d+),(\w+)/) {<br>
print â€œChunk upload completed! $1 byte uploaded.\nRemote MD5=$2 Local MD5=$chunkmd5hex\n\nâ€;<br>
if ($2 ne $chunkmd5hex) { die â€œCHUNK MD5 CHECK NOT PASSED!\nâ€ }<br>
} else {<br>
die â€œUnexpected server response!\n\n$result\nâ€;<br>
}<br>
}<br>
} else {<br>
if ($result =~ /files/(\d+)/) { $fileid = $1 } else { die â€œServer result did not contain a file ID.\n$resultâ€ }<br>
unless ($result =~ /File1.3=(\d+)/ and $1 == $cursize) { die â€œServer did not save all data we sent.\n$resultâ€ }<br>
unless ($result =~ /File1.2=.+?killcode=(\d+)/) { die â€œServer did not send our killcode.\n$resultâ€ }<br>
$killcode = $1;<br>
unless ($result =~ /File1.4=(\w+)/) { die â€œServer did not send the remote MD5 sum.\nâ€ }<br>
$remotemd5hex = lc($1);</p>
<pre><code>if ($chunks) {
  if ($result !~ /File1\.5=Incomplete/) { die "Server did not acknowledge the incomplete upload request.\n" }
  print "Chunk upload completed! $cursize byte uploaded.\nRemote MD5=$remotemd5hex Local MD5=$chunkmd5hex\n";
  if ($remotemd5hex ne $chunkmd5hex) { die "CHUNK MD5 CHECK NOT PASSED!\n" }
  print "Upload OK! Saving to rsapiuploads.txt and resuming upload...\n\n";
  open(O, "&gt;$file.uploaddata") or die "Unable to save upload server: $!\n";
  print O "$fulluploadserver\n$fileid\n$killcode\n";
  close(O);
} else {
  if ($result !~ /File1\.5=Completed/) { die "Server did not acknowledge the completed upload request.\n" }
  if ($md5hex ne $remotemd5hex) { die "FINAL MD5 CHECK NOT PASSED! LOCAL=$md5hex REMOTE=$remotemd5hex\n" }
  print "FINAL MD5 check passed. Upload OK! Saving status to rsapiuploads.txt\n$result";
}

open(O,"&gt;&gt;rsapiuploads.txt") or die "Unable to save to rsapiuploads.txt: $!\n";
print O $chunks ? "Initialized chunk upload for file $file.\n$result" : "Uploaded file $file.\n$result";
close(O);
</code></pre>
<p>}</p>
<p>return $cursize;<br>
}</p>
<p>sub htmlencode {<br>
my $text = shift || â€œâ€;</p>
<p>unless (%ESCAPES) {<br>
for (0 â€¦ 255) { $ESCAPES{chr($<em>)} = sprintf("%%%02X", $</em>) }<br>
}</p>
<p>$text =~ s/(.)/$ESCAPES{$1}/g;</p>
<p>return $text;<br>
}<br>
[/code]</p>
      </div>

      <meta itemprop='headline' content='Rapidshare API'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Jython.html'><span itemprop='name'>Jython</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-07-06T22:50:12Z'>
            <time itemprop='dateModified' datetime='2016-07-31T17:36:27Z' class='post-time'>
              July 31, 2016,  5:36pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>how elegant as well as bad perl can be at the same time</p>
      </div>

      <meta itemprop='headline' content='Rapidshare API'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/chri5.html'><span itemprop='name'>chri5</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-07-07T06:22:36Z'>
            <time itemprop='dateModified' datetime='2016-07-31T17:37:02Z' class='post-time'>
              July 31, 2016,  5:37pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>plowshare</p>
      </div>

      <meta itemprop='headline' content='Rapidshare API'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Javafire.html'><span itemprop='name'>Javafire</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-07-07T20:56:26Z'>
            <time itemprop='dateModified' datetime='2016-07-31T17:37:40Z' class='post-time'>
              July 31, 2016,  5:37pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>rapidshare is garbage, hotfile is nicer.</p>
      </div>

      <meta itemprop='headline' content='Rapidshare API'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Speljohan.html'><span itemprop='name'>Speljohan</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-07-07T22:11:47Z'>
            <time itemprop='dateModified' datetime='2016-07-31T17:37:47Z' class='post-time'>
              July 31, 2016,  5:37pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=â€œJavafire, post:4, topic:347653â€]rapidshare is garbage, hotfile is nicer.[/quote]All those websites are garbage for the pirate-type of filesharing.</p>
      </div>

      <meta itemprop='headline' content='Rapidshare API'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xEnt.html'><span itemprop='name'>xEnt</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-07-08T08:56:45Z'>
            <time itemprop='dateModified' datetime='2016-07-31T17:38:28Z' class='post-time'>
              July 31, 2016,  5:38pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>rapidshare is garbage with their new plans now. everyone movin to megaupload/hotfile</p>
      </div>

      <meta itemprop='headline' content='Rapidshare API'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/rapidshare-api/347653 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 03:55:52 GMT -->
</html>
